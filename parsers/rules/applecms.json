{
  "name": "苹果CMS通用规则",
  "version": "1.0.0",
  "author": "System",
  "description": "支持使用苹果CMS系统的影视站，提取 player_aaaa 变量中的视频地址",
  "enabled": true,
  "priority": 10,
  
  "match": {
    "domains": ["*"],
    "pathPattern": "/(play|video|vod)/.*\\.html?"
  },
  
  "request": {
    "headers": {
      "User-Agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36"
    },
    "timeout": 15000
  },
  
  "extract": [
    {
      "name": "player_aaaa",
      "type": "regex",
      "target": "html",
      "pattern": "var\\s+player_aaaa\\s*=\\s*(\\{[\\s\\S]*?\\});?\\s*</script>",
      "group": 1,
      "fields": {
        "url": "url",
        "title": "vod_data.vod_name"
      }
    }
  ],
  
  "decode": [
    {
      "type": "base64"
    },
    {
      "type": "url"
    }
  ],
  
  "validate": {
    "pattern": "^https?://",
    "extensions": ["m3u8", "mp4", "flv"]
  },
  
  "output": {
    "type": "auto",
    "referer": "{origin}"
  }
}
